Implementation Breakdown

Phase 1: 
Zone Entity & Schema Creation
Create Zone Schema (src/schemas/zone.schema.ts)

Zone name, branchId reference, isActive status
Proper indexing and relationships
Update Pickup Station Schema

Add zoneId reference to pickup stations
Update existing pickup stations to belong to zones
Create Zone DTOs

CreateZoneDto, UpdateZoneDto
Validation rules


Phase 2:
Zone Service & Controller
Create Zones Service (src/zones/zones.service.ts)

CRUD operations for zones
Find zones by branch
Zone activation/deactivation
Create Zones Controller (src/zones/zones.controller.ts)

REST endpoints for zone management
Role-based access control
Create Zones Module

Wire up service, controller, and schema



Phase 3: 
User Role Extension
Update User Schema

Add zone field for Zonal Admins
Update Role enum to include ZONAL_ADMIN
Update Admin Hierarchy Service

Extend hierarchy validation for Zonal Admins
Add zone access control methods


Phase 4: 
Event System Extension
Update Event Schema

Add availableZones field
Update creatorLevel enum to include 'zonal_admin'
Extend Hierarchical Event Services

Add zone selection for Branch Admins
Add zone-level event creation for Zonal Admins
Update event cascade flow



Phase 5:
Pickup Station Management
Update Pickup Station Schema

Add zoneId reference
Update existing relationships
Extend Pickup Station Service

Add methods to find stations by zone
Zone-based activation/deactivation



Phase 6: 
Event-Pickup Station Assignment
Create Event-Zone-Pickup Assignment System
Allow Zonal Admins to select active pickup stations for events
Set departure times and capacity per station
Store assignments in event schema


Phase 7: 
Admin Approval Flow Extension
Update User Registration/Approval
Add Zonal Admin registration flow
Extend approval system for Branch â†’ Zonal Admin approval
Phase 8: API Endpoints & Controllers
Update Event Controllers

Add zone selection endpoints for Branch Admins
Add pickup station assignment endpoints for Zonal Admins
Update Admin Controllers

Add Zonal Admin dashboard
Extend hierarchical event management


Phase 9: 
Data Migration
Create Migration Scripts
Migrate existing pickup stations to zones
Update existing events to include zone structure



Phase 10: Testing & Validation
Update Tests
Unit tests for new services
Integration tests for zone flow
End-to-end tests for complete event cascade
